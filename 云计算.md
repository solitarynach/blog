# 云计算

## “云”概念

### 软件

基本概念：软件是由程序员写的让 CPU 来完成某项任务的步骤 。

这些步骤包括`输入/输出步骤和计算步骤`两大类  。输入/输出步骤要使用输入/输出设备， 计算步骤要使用计
算设备， 计算设备也称为计算资源  

**软件的基本特征**：

- 完成任务
- 输入数据
- 输出结果
- 指令集

软件必须包含以下几个：`输入/输出语句、计算语句`

- 实时输入/输出

  cpu执行输入/输出步骤时，立即完成输入/输出动作

  例如：大部分计算机软件、办公软件

  - 强交互性输入/输出：是指软件在运行时需要`实时的进行大量输入/输出操作`，且输入之后立马可以看到结果

    例如：微软的办公软件（word、excel）、记事本、qq、photoshop

  - 弱交互性输入/输出：指软件在实时的进行`少量输入操作`，然后就源源不断的输出

    例如：酷狗音乐播放器、家庭相册、迅雷下载

- 批量输入/输出

  一次性输入全部的信息，一次性输出全部的计算结果。绝大部分`网站`都是批量输入/输出的

  例如：注册一个在线免费邮箱，一次性输入全部注册信息，再提交

在规划云计算方案时， 要特别关注软件的输入/输出是实时的还是批量的。如果是实时的， 那么还要进一步区分是强交互性的还是弱交互性的。 对于实时的强交互性软件 ，有两种解决方法：   

- 计算机网络的延时控制在合理的范围内（一般要小于 100 毫秒）， 解决方法是就近部署云计算分支中心  
- 改造软件以便能通过网页浏览器访问， 用户只与本地的网页浏览器进行实时输入/输出交互， 而网页浏览器与“云” 中软件进行批量输入/输出传输， 使用浏览器改造强交互性软件

`软件运行模型`

![image-20231028153506843](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028153506843.png)

输入设备：常见的输入设备有键盘、 鼠标、扫描仪、 话筒、 摄像头、 网络等  

输出设备：常见的输出设备有计算机显示器、 打印机、 绘图仪、 音箱、 耳机、 网络、 机械手等  

计算设备：计算设备一般指 CPU、 内存、 存储器（硬盘属于最典型的存储设备）和网络 、计算设备就是程序运行时需要使用的资源——`计算资源`。  

``软件平时保存在硬盘中， 但必须读取到内存中去执行， 一个软件可以被多次执行。`  

`计算设备和输入/输出设备的分离是云计算的特征之一。 也就是说， 对于云计算而言， 计算设备位于远方的云端， 而输入/输出设备就在眼前`。 

### 计算机系统

![image-20231028153954975](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028153954975.png)

- 硬件
- 操作系统
- 应用软件
- 数据资料

传统的个人计算机操作系统没有固化，会有各种问题，现在有两个趋势：

一个趋势是操作系统固化， 用户自己不能安装和更改操作系统， 只能在线对操作系统进行升级。 应用软件也不能随便安装， 只能从官方应用软件库中在线安装， 如平板电脑、 智能手机等。 

第二个趋势是云计算。

`准计算机系统（硬件、操作系统、应用软件）是手段，数据资料是目的`。云计算服务提供商拥有计算机资源这个手段，而云计算用户拥有数据资料这个目的

### 计算机网络

**第一个指标：延时**

一个云计算中心的延时半径通常为 100 毫秒，即一个数据包从云中心出发， 50 毫秒所能到达的范围（ 返回也要 50 毫秒）， `这个数字与地理位置没有直接关系， 而与网络路径上的转发机构和数目有关`。 比如深圳的超算中心 50毫秒延时半径可能包括了美国的洛杉矶， 但没有包括广东省内的梅州市， 因为深圳与梅州市之间要经过太多性能低下的转发设备， 而达到美国洛杉矶只经过少数几台高速路由器，  

![image-20231028154640535](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028154640535.png)

**第二个指标：带宽**

定义为每秒钟能传递的数据量  

如果把计算机网络比喻为布满收费站的高速公路（ 车子从一个收费站行驶到另一个收费站的时间可以忽略不计，但是在收费站交钱时要消耗时间）， `那么带宽就与车道数直接相关， 延时就是从出发点到目的地经过收费站交钱时所消耗的时间之和`  

**第三个指标：丢包率**

在一定时间内被丢掉的数据包数目占总发送数据包数目的百分比  

![image-20231028154836000](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028154836000.png)

本机发送的一个数据包如果在规定的时间内没有得到对方的确认， 就认为此数据包被丢失， 于是重发此数据包。  

### IT系统的组成

![image-20231028155515171](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028155515171.png)

IT系统逻辑上有9层。

1-4层为基础设施层、5-7层为平台软件层、8、9层分别为应用软件层和数据信息层。

基础设施层、 平台软件层、 应用软件层可以进一步归并到Ｔ（ Technology的首字母， 表示技术）， 而数据信息层就是Ｉ（ Information 的首字母， 表示信息）， 这就是 IT 的含义——信息技术  

IT 就是信息（ Information） 与技术（ Technology）， 其中 `I 是目的，T 是手段， T 是用来加工处理 I 的`。 T 广义上还包括企业中的计算机技术人员。  

重点介绍一下**平台软件层**：

`操作系统、运行库、中间件、数据库`

平台软件存在的唯一理由就是`让应用软件能在计算机上运行`  

平台软件就是应用软件运行时所依赖的环境 ，例如qq这个应用软件想要运行必须先安装操作系统、QQ 需要的运行库在安装操作系统时会自动安装  

![image-20231028160127450](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028160127450.png)

由图可知：在操作系统平台上搭建运行库、中间件、数据库三个“台”，最后在最上层放置应用软件（并不一定三者全部都要）

**运行库**有点像电工人员的工具袋， 里面有螺丝刀、 电笔、 老虎钳、剥线钳等  应用软件在运行时需要使用各种小工具（ 术语叫系统库函数调用）， 操作系统提供了绝大多数常用的小工具  

**中间件** 是一个技术含义很强的概念， 在家庭计算机和个人计算机上很少用到它， 在企业中使用很普遍。 中间件也就是“中间软件” 的意思， 为一类软件的统称。  中间” 包含两方面含义： 一是指处于操作系统和应用软件之间； 二是指介于应用软件与应用软件之间， 目的是为了隐藏差异， 以便共享资源和通信。  

### 云计算概念

不同于传统的计算机， 云计算引入了一种全新的方便人们使用计算资源的模式，  `云计算是一种全新的能让人们方便、 快捷地自助使用远程计算资源的模式。`  

计算资源所在地称为云端（也称为云基础设施）， 输入/输出设备称为云终端。 云终端就在人们触手可及的地方， 而云端位于“远方”（与地理位置远近无关， 需要通过网络才能到达）， 两者通过计算机网络连接在一起。 云终端与
云端之间是标准的 C/S 模式， 即客户端/服务器模式——客户端通过网络向云端发送请求消息， 云端计算处理后返回结果。  

![image-20231028161356967](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028161356967.png)

#### 五个基本特征

1. 自助服务
2. 广泛的网络访问
3. 资源优化
4. 快速弹性
5. 计费服务

#### 四种部署模型

- 私有云

  云端资源只给`一个单位组织内的用户使用`， 这是私有云的核心特征。  

- 社区云

  云端资源专门给`固定的几个单位内`的用户使用  ，而这些单位对云端具有相同的诉求  

- 公有云

  云端资源开放给社会公众使用  

- 混合云

  混合云由两个或两个以上不同类型的云（私有云、社区云、公有云）组成， 它们各自独立， 但用标准的或专有的技术将它们组合起来，而这些技术能实现云之间的数据和应用程序的平滑流转。  

这里提一下`租户和用户的区别`：

以一个单位组织（如企业、部门或团体等）的名义去租赁云计算服务时， 云服务提供商称呼该单位组织为一个租户， 而一个租户包含若干个用户（单位内的员工）， 这些用户当中有的是该租户的管理员， 有的是操作员等  

#### 三种服务模式

SaaS（软件即服务）

云服务提供商把 IT 系统中的应用软件层作为服务出租出去， 消费者不用自己安装应用软件， 直接使用即可， 这进一步降低了云服务消费者的技术门槛  

PaaS（平台即服务）

云服务提供商把 IT 系统中的平台软件层作为服务出租出去， 消费者自己开发或者安装程序， 并运行程序  

IaaS（基础设施即服务）

云服务提供商把IT 系统的基础设施层作为服务出租出去，由消费者自己安装操作系统、 中间件、 数据库和应用程序  

![image-20231028165754100](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028165754100.png)

##### IaaS

Infrastructure as a Service   

![image-20231028175103478](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028175103478.png)

**概念**：即把 `IT 系统的基础设施层作为服务出租出去`。 由云服务提供商把 IT 系统的基础设施建设好， 并对计算设备进行池化， 然后直接对外出租硬件服务器、虚拟主机、 存储或网络设施（负载均衡器、防火墙、公网 IP 地址及诸如 DNS等基础服务）等  

**消费者**：掌握一定技术的系统管理员

**云服务提供商负责**：管理机房基础设施、 计算机网络、 磁盘柜、 服务器和虚拟机  

**租户**：自己安装操作系统、数据库、中间件、运行库、应用软件、数据信息

对于云服务提供商来说， 出租硬件服务器和虚拟机， 内部的技术处理是不一样的， 其中硬件服务器必须要集成远程管理卡并要池化到资源池中。  

`远程管理卡是插接在服务器主板上或者直接集成在主板上的一个嵌入式系统`，需要接网线并配置 IP 地址。  只要服务器的电源插头插到插座上， 不管有没有按下服务器的电源开关， 这个远程管理卡都会启动， 其他人就可以通过网络登录到远程管理卡（需要账号和密码）， 成功登录后就可以进行启动和关闭服务器、 安装操作系统等操作  

![image-20231028170818472](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028170818472.png)

**基本架构模型**：

第一层（云管理器）：管理全局

云管理器是云端对外的总入口， 在这里验证用户身
份， 管理用户权限， 向合法用户发放票据（然后用户持此票据使用计算资源）、分配资源并管理用户租赁的资源  

第二层（集群管理器）：管理计算机集群

每一个集群负责管理本集群内部的高速互联在一
起的计算机， 一个集群内的计算机可能有成百上千台。   

第三层（计算机管理器）：负责运行虚拟机

每台计算机上都有一个计算机管理器， 它一方
面与上层的集群管理器打交道， 另一方面与本机上的虚拟机软件打交道。  

**优点**：最大优点是其灵活性， 由租户自己决定
安装什么操作系统、 需不需要数据库且安装什么数据库、 安装什么应用软件、安装多少应用软件、 要不要中间件、 安装什么中间件等， 相当于购买了一台
计算机， 要不要使用、 何时使用， 以及如何使用全由自己决定  

**缺点**：计算资源浪费严重。 因为操作系统、数据库和中间件本身要消耗大量的计算资源（ CPU、 内存和磁盘空间），但它们消耗的资源对租户来说是无用的

**实际应用：**  备份和恢复服务、计算服务、内容分发网络、服务管理、存储服务

##### PaaS

Platform as a Service

**概念**：即把 IT 系统的平台软件层作为服务出租，

![image-20231028175050873](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028175050873.png)相比于 IaaS 云服务提供商， PaaS 云服务提供商要做的事情增加了，它们需要准备机房、 布好网络、 购买设备、 安装操作系统、 数据库和中间件， 即把基础设施层和平台软件层都搭建好， 然后在平台软件层上划分“小块”（ 习惯称之为容器）并对外出租  

PaaS 云服务提供商不可能安装全部的语言、 数据库、 中间件和运行库来支持所有的应用软件， `因此目前普遍的做法是安装主流的编程语言、数据库、 中间件和运行库， 使得出租的 PaaS 容器支持有限的、 使用量排名靠`
`前的应用软件， 以及支持最流行的编程语言，`  

**分类：**

- 半平台PaaS：`平台软件层只安装了操作系统`，其他的留给租户自己解决。私有办公云多采用半平台PaaS。最为流行的半平台 PaaS 应用是开启操作系统的多用户模式， 为每个租户创建一个系统账号， 并对他们做权限控制和计算资源配额管制。   
- 全平台PaaS：`安装了应用软件依赖全部平台软件。`  不同于半平台 PaaS， 全平台 PaaS 是`针对应用软件`来做资源配额和权限控制的， 尽管最终还需要通过账号实现。 `公有云多采用全平台 PaaS。`  

**优点：**解决应用软件依赖的运行环境（如中间件、 数据库、 运行库等），其所依赖的软件全部由云服务提供商安装  

**缺点**：相对于 IaaS 云服务， PaaS 云服务消费者的灵活性降低了， 租户不能自己安装平台软件， 只能在有限的范围内选择。但优点也很明显  

**应用：**商业智能、数据库、开发和测试平台、软件集成平台、应用软件部署

##### SaaS

Software as a service

![image-20231028180350760](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231028180350760.png)

就是软件部署在云端， 让用户通过网络来使用它， 即云服务提供商把 IT 系统的应用软件层作为服务出租， 而消费者可以使用任何云终端设备接入计算机网络，然后通过网页浏览器或者编程接口使用云端的软件  

SaaS 云服务提供商负责 IT 系统的底三层（ 基础设施层、 平台软件层和应用软件层）， 也就是整个 T 层，最后直接把应用软件出租。 图 2-18 所示是 SaaS 云服务供/需双方的动态交互示意图。  

![image-20231030160645005](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231030160645005.png)

**实际应用**：

- 电子邮件和在线办公软件： 用于处理邮件、文字排版、子表格和演 示 文 档 的 应 用 软 件 ， 如 谷 歌 邮 箱 （ http://mail.google.com ）、 网 易 邮 箱
  （ http://mail.163.com/）、 微软 Office 365 在线办公、 谷歌在线文档（ https://docs.google.com）等。
- 计费开票软件： 用于处理客户有关使用和订阅产品及服务所产生的账单。
- 客户关系管理系统（ CRM）： 功能涵盖从客户呼叫中心到销售自动化的各种应用程序。
- 协作工具： 这种软件能促进企业内部或者跨企业的团队中的成员协同合作  
- 百度云盘、腾讯会议、钉钉、石墨文档

#### 四种部署模式

如果一个云端的所有消费者只来自一个特定的单位组织（如微算科技公司）， 那么就是私有云  

如果一个云端的所有消费者来自两个或两个以上特定的单位组织，那么就是社区云。  

如果一个云端的所有消费者来自社会公众， 那么就是公有云。  

如果一个云端的资源来自两个或两个以上的云， 那么就是混合云。目前绝大多数混合云由企事业单位主导， 以私有云为主体， 并融合部分公有云资源， 也就是说， 混合云的消费者主要来自一个或几个特定的单位组织。  

##### 私有云

私有云的核心特征是云端资源只供一个企事业单位内的员工使用  ，其他的人和机构都无权租赁并使用云端计算资源。  

**部署位置：**可能部署在单位内部，称为本地私有云

也有可能托管在别处，称为托管私有云

![image-20231030170325282](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231030170325282.png)

由于本地私有云的云端部署在企业内部， 私有云的安全及网络安全边界定义都由企业自己实现并管理， 一切由企业掌控，所以`本地私有云适合运行企业中关键的应用`。   

托管私有云由于云端托管在公司之外， 企业自身不能完全控制其安全性  ，所以要与信誉好、 资金雄厚的托管方合作， 这样的托管方抵御天灾人祸的能力更 强。 

![image-20231030170528313](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231030170528313.png)

**所有权**：一种归企业自身

一种归他人所有，企业租用

**日常管理由谁负责：**

`管理、运维和操作的解释`

管理是指制定规章制度、合规性监督、定期安全检查、灾难演练、数据恢复演练、 SLA 制订与落地检
查等， 侧重于制度和人员层面。 

运维指日常运行维护， 具体包括机器性能监控、 应用监控、性能调优、故障发现与处理、建立问题库、问题热线坐席、定期输出运维报告、产能扩容与收缩、 应用转产与退出等， 侧重于设备层面  

云端的操作不是指云服务消费者的操作， 而是指云端的例行日常工作， 包括
数据备份、服务热线坐席、日常卫生、 与消费者的一些操作互动等。 云端的
日常管理可以完全由自己承担， 也可以完全外包出去或者部分外包出去  

##### 社区云



##### 公有云



##### 混合云

